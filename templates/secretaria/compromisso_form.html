{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">{{ title }}</h2>
    <form method="POST" class="needs-validation" novalidate>
        {{ form.hidden_tag() }}  <!-- Para CSRF -->

        <div class="mb-3">
            <label for="titulo" class="form-label">{{ form.titulo.label }}</label>
            {{ form.titulo(class="form-control") }}
            <div class="invalid-feedback">Por favor, preencha o título.</div>
        </div>

        <div class="mb-3">
            <label for="descricao" class="form-label">{{ form.descricao.label }}</label>
            {{ form.descricao(class="form-control", rows=4) }}
        </div>

        <div class="mb-3">
            <label for="data" class="form-label">{{ form.data.label }}</label>
            {{ form.data(class="form-control") }}
            <div class="invalid-feedback">Por favor, selecione uma data válida.</div>
        </div>

        <div class="mb-3">
            <label for="hora" class="form-label">{{ form.hora.label }}</label>
            {{ form.hora(class="form-control") }}
        </div>

        <div class="mb-3">
            <label for="local" class="form-label">{{ form.local.label }}</label>
            {{ form.local(class="form-control") }}
        </div>

        <div class="mb-3">
            <label for="membro_id" class="form-label">{{ form.membro_id.label }}</label>
            {{ form.membro_id(class="form-select") }}
        </div>

        <div class="d-flex justify-content-between">
            {{ form.submit(class="btn btn-primary") }}
            <a href="{{ url_for('agenda') }}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>

<script>
    // Validação Bootstrap
    (function () {
        'use strict'
        var forms = document.querySelectorAll('.needs-validation')
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false)
            })
    })()
</script>
{% endblock %}