{% extends "includes/_layout.html" %}
{% block content %}
<div class="container mt-4">
  <h2>Custos Fixos</h2>
  <form method="POST" action="{{ url_for('adicionar_custo_fixo') }}" class="mb-3">
    <input type="text" name="nome" placeholder="Nome do custo" required>
    <input type="number" step="0.01" name="valor" placeholder="Valor" required>
    <input type="month" name="mes_referencia">
    <label><input type="checkbox" name="ativo" checked> Ativo</label>
    <button type="submit">Adicionar</button>
  </form>

  <table border="1" cellpadding="8">
    <tr><th>Nome</th><th>Valor</th><th>Mês</th><th>Status</th><th>Ações</th></tr>
    {% for c in custos %}
    <tr>
      <td>{{ c.nome }}</td>
      <td>R$ {{ "%.2f"|format(c.valor) }}</td>
      <td>{{ c.mes_referencia or 'Todos' }}</td>
      <td>{{ 'Ativo' if c.ativo else 'Inativo' }}</td>
      <td>
        <form method="POST" action="{{ url_for('editar_custo_fixo', id=c.id) }}">
          <input type="text" name="nome" value="{{ c.nome }}">
          <input type="number" step="0.01" name="valor" value="{{ c.valor }}">
          <input type="month" name="mes_referencia" value="{{ c.mes_referencia }}">
          <label><input type="checkbox" name="ativo" {% if c.ativo %}checked{% endif %}> Ativo</label>
          <button type="submit">Salvar</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>
</div>
{% endblock %}
