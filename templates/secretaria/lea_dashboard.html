{% extends "base.html" %}
{% block content %}
<style>
    body { 
        background: linear-gradient(to bottom, #e0f7fa, #ffffff); 
        font-family: 'Roboto', sans-serif; 
        color: #333; 
    }
    .dashboard-header { 
        background: #2196F3; 
        color: white; 
        padding: 40px 0; 
        text-align: center; 
        border-radius: 0 0 20px 20px; 
        box-shadow: 0 4px 10px rgba(0,0,0,0.1); 
    }
    .dashboard-header h1 { 
        font-weight: 700; 
        margin-bottom: 10px; 
    }
    .dashboard-header p { 
        font-style: italic; 
        font-size: 1.2em; 
    }
    .stat-card { 
        border: none; 
        border-radius: 15px; 
        overflow: hidden; 
        transition: transform 0.3s, box-shadow 0.3s; 
        cursor: pointer; 
    }
    .stat-card:hover { 
        transform: translateY(-5px); 
        box-shadow: 0 15px 25px rgba(0,0,0,0.15); 
    }
    .stat-card .card-body { 
        text-align: center; 
        padding: 20px; 
    }
    .stat-card h5 { 
        font-size: 1.1em; 
        margin-bottom: 10px; 
    }
    .stat-card h2 { 
        font-weight: bold; 
    }
    .quick-link { 
        display: block; 
        background: linear-gradient(135deg, #4CAF50, #66BB6A); 
        color: white; 
        padding: 20px; 
        text-align: center; 
        border-radius: 15px; 
        margin: 10px 0; 
        transition: background 0.3s, transform 0.3s; 
        text-decoration: none; 
    }
    .quick-link:hover { 
        background: linear-gradient(135deg, #388E3C, #4CAF50); 
        transform: translateY(-3px); 
    }
    .quick-link i { 
        font-size: 2.5em; 
        margin-bottom: 10px; 
        display: block; 
    }
    .quick-link h4 { 
        font-size: 1.2em; 
        margin: 0; 
    }
    .section-title { 
        font-weight: 600; 
        margin: 30px 0 15px; 
        color: #1976D2; 
        border-bottom: 2px solid #2196F3; 
        padding-bottom: 10px; 
    }
    .list-group-item { 
        border-radius: 10px; 
        margin-bottom: 10px; 
        box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
        transition: background 0.3s; 
    }
    .list-group-item:hover { 
        background: #f5f5f5; 
    }
    .fade-in { 
        animation: fadeIn 1.5s ease-in; 
    }
    @keyframes fadeIn { 
        from { opacity: 0; transform: translateY(20px); } 
        to { opacity: 1; transform: translateY(0); } 
    }
</style>
<div class="dashboard-header fade-in">
    <h1>Bem-vinda, Lea! Seu Dashboard Personalizado ✨</h1>
    <p>Aqui você gerencia tudo com facilidade e inspiração. Vamos impactar vidas juntos!</p>
</div>

<div class="container mt-4 fade-in">
    <!-- Estatísticas em cards interativos -->
    <div class="section-title">Estatísticas Rápidas</div>
    <div class="row mb-4">
        <div class="col-md-3 mb-3">
            <div class="card stat-card bg-primary text-white">
                <div class="card-body">
                    <h5>Membros Cadastrados</h5>
                    <h2 id="membros-count">{{ membros_count }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card stat-card bg-success text-white">
                <div class="card-body">
                    <h5>Eventos Programados</h5>
                    <h2 id="eventos-count">{{ eventos_count }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card stat-card bg-info text-white">
                <div class="card-body">
                    <h5>Ministérios Ativos</h5>
                    <h2 id="ministerios-count">{{ ministerios_count }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card stat-card bg-warning text-white">
                <div class="card-body">
                    <h5>Compromissos Hoje</h5>
                    <h2 id="compromissos-count">{{ compromissos_hoje }}</h2>
                </div>
            </div>
        </div>
        {% if mensagens_enviadas > 0 %}
        <div class="col-md-3 mb-3">
            <div class="card stat-card bg-purple text-white" style="background: #9C27B0;">
                <div class="card-body">
                    <h5>Mensagens Enviadas</h5>
                    <h2 id="mensagens-count">{{ mensagens_enviadas }}</h2>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
    
    <!-- Acesso rápido com ícones e hover -->
    <div class="section-title">Acesso Rápido</div>
    <div class="row mb-4">
        <div class="col-md-3 mb-3">
            <a href="{{ url_for('listar_ministerios') }}" class="quick-link" style="background: linear-gradient(135deg, #2196F3, #42A5F5);">
                <i class="fas fa-church"></i>
                <h4>Ministérios</h4>
            </a>
        </div>
        <div class="col-md-3 mb-3">
            <a href="{{ url_for('listar_membros') }}" class="quick-link" style="background: linear-gradient(135deg, #FF9800, #FFB74D);">
                <i class="fas fa-users"></i>
                <h4>Membros</h4>
            </a>
        </div>
        <div class="col-md-3 mb-3">
            <a href="{{ url_for('listar_eventos') }}" class="quick-link" style="background: linear-gradient(135deg, #E91E63, #EC407A);">
                <i class="fas fa-calendar-alt"></i>
                <h4>Eventos</h4>
            </a>
        </div>
        <div class="col-md-3 mb-3">
            <a href="{{ url_for('enviar_mensagem') }}" class="quick-link" style="background: linear-gradient(135deg, #673AB7, #7E57C2);">
                <i class="fas fa-envelope"></i>
                <h4>Enviar Mensagens</h4>
            </a>
        </div>
        <div class="col-md-3 mb-3">
            <a href="{{ url_for('agenda') }}" class="quick-link" style="background: linear-gradient(135deg, #4CAF50, #66BB6A);">
                <i class="fas fa-clock"></i>
                <h4>Agenda</h4>
            </a>
        </div>
        <div class="col-md-3 mb-3">
            <a href="{{ url_for('financeiro') }}" class="quick-link" style="background: linear-gradient(135deg, #FFC107, #FFCA28);">
                <i class="fas fa-money-bill-wave"></i>
                <h4>Financeiro</h4>
            </a>
        </div>
        <!-- Adicione mais links se necessário, mantendo o grid responsivo -->
    </div>
    
    <!-- Seções interativas: Compromissos e Eventos -->
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="section-title">Compromissos Próximos</div>
            <ul class="list-group">
                {% if compromissos %}
                {% for c in compromissos %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><strong>{{ c.titulo }}</strong> - {{ c.data.strftime('%d/%m/%Y') }}</span>
                    <a href="{{ url_for('detalhes_compromisso', id=c.id) }}" class="btn btn-sm btn-outline-primary">Ver</a>
                </li>
                {% endfor %}
                {% else %}
                <li class="list-group-item text-muted">Nenhum compromisso próximo.</li>
                {% endif %}
            </ul>
        </div>
        <div class="col-md-6 mb-4">
            <div class="section-title">Eventos Recentes</div>
            <ul class="list-group">
                {% if eventos %}
                {% for e in eventos %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><strong>{{ e.titulo }}</strong> - {{ e.data.strftime('%d/%m/%Y') }}</span>
                    <a href="{{ url_for('editar_evento', id=e.id) }}" class="btn btn-sm btn-outline-info">Editar</a>
                </li>
                {% endfor %}
                {% else %}
                <li class="list-group-item text-muted">Nenhum evento recente.</li>
                {% endif %}
            </ul>
        </div>
    </div>
</div>

<script>
    // Animação de contadores melhorada
    function animateCount(id, end) {
        let count = 0;
        const duration = 2000; // 2 segundos
        const step = end / (duration / 20);
        const interval = setInterval(() => {
            count += step;
            if (count >= end) { count = end; clearInterval(interval); }
            document.getElementById(id).innerText = Math.floor(count);
        }, 20);
    }
    animateCount('membros-count', {{ membros_count }});
    animateCount('eventos-count', {{ eventos_count }});
    animateCount('ministerios-count', {{ ministerios_count }});
    animateCount('compromissos-count', {{ compromissos_hoje }});
    {% if mensagens_enviadas > 0 %}
    animateCount('mensagens-count', {{ mensagens_enviadas }});
    {% endif %}
</script>
{% endblock %}